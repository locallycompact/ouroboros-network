<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns          #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP                   #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns        #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">-- to preserve 'HasCallstack' constraint on 'checkInvariant'</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-redundant-constraints #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Monad.Class.MonadSTM.Strict</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier">LazyTVar</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier">LazyTMVar</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- * 'StrictTVar'</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier">StrictTVar</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier">labelTVar</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier">labelTVarIO</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVar"><span class="hs-identifier">traceTVar</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVarIO"><span class="hs-identifier">traceTVarIO</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier">castStrictTVar</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier">toLazyTVar</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTVar"><span class="hs-identifier">fromLazyTVar</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier">newTVar</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier">newTVarIO</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier">newTVarWithInvariantIO</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier">readTVar</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier">readTVarIO</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier">writeTVar</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier">modifyTVar</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier">stateTVar</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier">swapTVar</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-comment">-- * 'StrictTMVar'</span></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier">StrictTMVar</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier">labelTMVar</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier">labelTMVarIO</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVar"><span class="hs-identifier">traceTMVar</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVarIO"><span class="hs-identifier">traceTMVarIO</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier">castStrictTMVar</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3AtoLazyTMVar%3AStrictTMVar"><span class="hs-identifier">toLazyTMVar</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTMVar"><span class="hs-identifier">fromLazyTMVar</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier">newTMVar</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier">newTMVarIO</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier">newEmptyTMVar</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier">newEmptyTMVarIO</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier">takeTMVar</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier">tryTakeTMVar</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier">putTMVar</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier">tryPutTMVar</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier">readTMVar</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier">tryReadTMVar</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier">swapTMVar</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier">isEmptyTMVar</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Low-level API</span></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier">checkInvariant</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Deprecated API</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier">updateTVar</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier">newTVarM</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier">newTVarWithInvariantM</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier">newTMVarM</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier">newEmptyTMVarM</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">Control.Monad.Class.MonadSTM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">LazyTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">LazyTVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">TMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">TVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">isEmptyTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">labelTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">labelTMVarIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">traceTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">traceTMVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">labelTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">labelTVarIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">traceTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">traceTVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">modifyTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newEmptyTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newEmptyTMVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newEmptyTMVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTMVarIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTMVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">newTVarM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">putTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">readTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">readTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">readTVarIO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">stateTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">swapTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">swapTVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">takeTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">tryPutTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">tryReadTMVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">tryTakeTMVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">writeTVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier">Control.Monad.Class.MonadSTM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier">GHC.Stack</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Lazy TVar
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">type</span><span> </span><span id="LazyTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-var">LazyTVar</span></a></span></span><span>  </span><span id="local-6989586621679039438"><span class="annot"><a href="#local-6989586621679039438"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">Lazy.TVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039438"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">type</span><span> </span><span id="LazyTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-var">LazyTMVar</span></a></span></span><span> </span><span id="local-6989586621679039437"><span class="annot"><a href="#local-6989586621679039437"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">Lazy.TMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039437"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Strict TVar
-------------------------------------------------------------------------------}</span><span class="hs-cpp">

#if CHECK_TVAR_INVARIANT
</span><span class="hs-keyword">data</span><span> </span><span class="hs-identifier">StrictTVar</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">StrictTVar</span><span>
</span><span id="line-89"></span><span>   </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">invariant</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">String</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>     </span><span class="hs-comment">-- ^ Invariant checked whenever updating the 'StrictTVar'.</span><span>
</span><span id="line-91"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tvar</span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier">LazyTVar</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>   </span><span class="hs-special">}</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">newtype</span><span> </span><span id="StrictTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span></span><span> </span><span id="local-6989586621679039687"><span class="annot"><a href="#local-6989586621679039687"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679039686"><span class="annot"><a href="#local-6989586621679039686"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StrictTVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-var">StrictTVar</span></a></span></span><span>
</span><span id="line-95"></span><span>   </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atvar%3AStrictTVar"><span class="annot"><span class="annottext">StrictTVar m a -&gt; LazyTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3Atvar%3AStrictTVar"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039687"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039686"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-96"></span><span>   </span><span class="hs-special">}</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-99"></span><span id="local-6989586621679039671"><span id="local-6989586621679039672"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-type">labelTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039671"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039672"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-100"></span><span id="labelTVar"><span class="annot"><span class="annottext">labelTVar :: StrictTVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-var hs-var">labelTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679039434"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039434"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
TVar m a -&gt; String -&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.labelTVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039434"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621679039432"><span id="local-6989586621679039433"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier hs-type">labelTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039433"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039433"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039432"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039433"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-103"></span><span id="labelTVarIO"><span class="annot"><span class="annottext">labelTVarIO :: StrictTVar m a -&gt; String -&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVarIO"><span class="hs-identifier hs-var hs-var">labelTVarIO</span></a></span></span><span> </span><span id="local-6989586621679039431"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039431"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM m () -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; m ()) -&gt; (String -&gt; STM m ()) -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
StrictTVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTVar"><span class="hs-identifier hs-var">labelTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039431"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621679039426"><span id="local-6989586621679039427"><span id="local-6989586621679039428"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVar"><span class="hs-identifier hs-type">traceTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadTraceSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039428"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-106"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039427"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039428"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-107"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039428"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039426"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span>
</span><span id="line-108"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039426"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039426"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">InspectMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039428"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">TraceValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039428"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-110"></span><span id="traceTVar"><span class="annot"><span class="annottext">traceTVar :: proxy m
-&gt; StrictTVar m a
-&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVar"><span class="hs-identifier hs-var hs-var">traceTVar</span></a></span></span><span> </span><span id="local-6989586621679039425"><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039425"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679039424"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039424"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">proxy m
-&gt; LazyTVar m a
-&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
forall (m :: * -&gt; *) (proxy :: (* -&gt; *) -&gt; *) a.
MonadTraceSTM m =&gt;
proxy m
-&gt; TVar m a
-&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.traceTVar</span></a></span><span> </span><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039425"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039424"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679039421"><span id="local-6989586621679039422"><span id="local-6989586621679039423"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVarIO"><span class="hs-identifier hs-type">traceTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadTraceSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039423"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-113"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039422"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039423"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-114"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039421"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-115"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039421"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039421"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">InspectMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">TraceValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-117"></span><span id="traceTVarIO"><span class="annot"><span class="annottext">traceTVarIO :: proxy m
-&gt; StrictTVar m a
-&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue)
-&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTVarIO"><span class="hs-identifier hs-var hs-var">traceTVarIO</span></a></span></span><span> </span><span id="local-6989586621679039420"><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039420"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679039419"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039419"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">proxy m
-&gt; LazyTVar m a
-&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue)
-&gt; m ()
forall (m :: * -&gt; *) (proxy :: (* -&gt; *) -&gt; *) a.
MonadTraceSTM m =&gt;
proxy m
-&gt; TVar m a -&gt; (Maybe a -&gt; a -&gt; InspectMonad m TraceValue) -&gt; m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.traceTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039420"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039419"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span id="local-6989586621679039416"><span id="local-6989586621679039417"><span id="local-6989586621679039418"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier hs-type">castStrictTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039418"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039417"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-120"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039418"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039416"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039417"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039416"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-121"></span><span id="castStrictTVar"><span class="annot"><span class="annottext">castStrictTVar :: StrictTVar m a -&gt; StrictTVar n a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTVar"><span class="hs-identifier hs-var hs-var">castStrictTVar</span></a></span></span><span> </span><span id="local-6989586621679039415"><span class="annot"><span class="annottext">v :: StrictTVar m a
</span><a href="#local-6989586621679039415"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679039414"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039414"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; TVar n a -&gt; StrictTVar n a
forall a (m :: * -&gt; *).
(a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#mkStrictTVar"><span class="hs-identifier hs-var">mkStrictTVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; Maybe String
forall (m :: * -&gt; *) a. StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#getInvariant"><span class="hs-identifier hs-var">getInvariant</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039415"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
TVar n a
</span><a href="#local-6989586621679039414"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Get the underlying @TVar@</span><span>
</span><span id="line-125"></span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- Since we obviously cannot guarantee that updates to this 'LazyTVar' will be</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- strict, this should be used with caution.</span><span>
</span><span id="line-128"></span><span id="local-6989586621679039410"><span id="local-6989586621679039411"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier hs-type">toLazyTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039411"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039410"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039411"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039410"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-129"></span><span id="toLazyTVar"><span class="annot"><span class="annottext">toLazyTVar :: StrictTVar m a -&gt; LazyTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#toLazyTVar"><span class="hs-identifier hs-var hs-var">toLazyTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679039409"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039409"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039409"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621679039407"><span id="local-6989586621679039408"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTVar"><span class="hs-identifier hs-type">fromLazyTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTVar"><span class="hs-identifier hs-type">LazyTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039408"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039407"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039408"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039407"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-132"></span><span id="fromLazyTVar"><span class="annot"><span class="annottext">fromLazyTVar :: LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTVar"><span class="hs-identifier hs-var hs-var">fromLazyTVar</span></a></span></span><span> </span><span id="local-6989586621679039406"><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039406"><span class="hs-identifier hs-var">tvar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="hs-cpp">
#if CHECK_TVAR_INVARIANT
</span><span>  </span><span class="hs-identifier">StrictTVar</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">invariant</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">const</span><span> </span><span class="hs-identifier">Nothing</span><span>
</span><span id="line-135"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tvar</span><span>
</span><span id="line-136"></span><span>             </span><span class="hs-special">}</span><span class="hs-cpp">
#else
</span><span>  </span><span class="annot"><span class="annottext">StrictTVar :: forall (m :: * -&gt; *) a. LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: LazyTVar m a
</span><a href="#local-6989586621679039406"><span class="hs-identifier hs-var hs-var">tvar</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-141"></span><span id="local-6989586621679039404"><span id="local-6989586621679039405"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier hs-type">newTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039405"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039404"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039405"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039405"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039404"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-142"></span><span id="newTVar"><span class="annot"><span class="annottext">newTVar :: a -&gt; STM m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVar"><span class="hs-identifier hs-var hs-var">newTVar</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039403"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039403"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679039402"><span class="annot"><span class="annottext">TVar m a
</span><a href="#local-6989586621679039402"><span class="hs-identifier hs-var">tvar</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
forall a (m :: * -&gt; *).
(a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#mkStrictTVar"><span class="hs-identifier hs-var">mkStrictTVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe String -&gt; a -&gt; Maybe String
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TVar m a
</span><a href="#local-6989586621679039402"><span class="hs-identifier hs-var">tvar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>         </span><span class="annot"><span class="annottext">(TVar m a -&gt; StrictTVar m a)
-&gt; STM m (TVar m a) -&gt; STM m (StrictTVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; STM m (TVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; STM m (TVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newTVar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039403"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span id="local-6989586621679039629"><span id="local-6989586621679039630"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-type">newTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039630"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039629"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039630"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039630"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039629"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-146"></span><span id="newTVarIO"><span class="annot"><span class="annottext">newTVarIO :: a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-var hs-var">newTVarIO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var">newTVarWithInvariantIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe String -&gt; a -&gt; Maybe String
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621679039398"><span id="local-6989586621679039399"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier hs-type">newTVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039398"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039398"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-149"></span><span id="newTVarM"><span class="annot"><span class="annottext">newTVarM :: a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarM"><span class="hs-identifier hs-var hs-var">newTVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span>
</span><span id="line-150"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTVarM</span><span> </span><span class="hs-pragma">&quot;Use newTVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span id="local-6989586621679039633"><span id="local-6989586621679039634"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-type">newTVarWithInvariantIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039634"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039633"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Invariant (expect 'Nothing')</span><span>
</span><span id="line-154"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039633"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-155"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039634"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039634"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039633"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-156"></span><span id="newTVarWithInvariantIO"><span class="annot"><span class="annottext">newTVarWithInvariantIO :: (a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var hs-var">newTVarWithInvariantIO</span></a></span></span><span>  </span><span id="local-6989586621679039397"><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679039397"><span class="hs-identifier hs-var">invariant</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039396"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039396"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><span class="annottext">Maybe String -&gt; m (StrictTVar m a) -&gt; m (StrictTVar m a)
forall a. HasCallStack =&gt; Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var">checkInvariant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679039397"><span class="hs-identifier hs-var">invariant</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039396"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (StrictTVar m a) -&gt; m (StrictTVar m a))
-&gt; m (StrictTVar m a) -&gt; m (StrictTVar m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-158"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679039395"><span class="annot"><span class="annottext">TVar m a
</span><a href="#local-6989586621679039395"><span class="hs-identifier hs-var">tvar</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
forall a (m :: * -&gt; *).
(a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#mkStrictTVar"><span class="hs-identifier hs-var">mkStrictTVar</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679039397"><span class="hs-identifier hs-var">invariant</span></a></span><span> </span><span class="annot"><span class="annottext">TVar m a
</span><a href="#local-6989586621679039395"><span class="hs-identifier hs-var">tvar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">(TVar m a -&gt; StrictTVar m a) -&gt; m (TVar m a) -&gt; m (StrictTVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (TVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (TVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039396"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span id="local-6989586621679039393"><span id="local-6989586621679039394"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier hs-type">newTVarWithInvariantM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039394"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039393"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Invariant (expect 'Nothing')</span><span>
</span><span id="line-163"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039393"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-164"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039394"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039394"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039393"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-165"></span><span id="newTVarWithInvariantM"><span class="annot"><span class="annottext">newTVarWithInvariantM :: (a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantM"><span class="hs-identifier hs-var hs-var">newTVarWithInvariantM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
(a -&gt; Maybe String) -&gt; a -&gt; m (StrictTVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTVarWithInvariantIO"><span class="hs-identifier hs-var">newTVarWithInvariantIO</span></a></span><span>
</span><span id="line-166"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTVarWithInvariantM</span><span> </span><span class="hs-pragma">&quot;Use newTVarWithInvariantIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621679039607"><span id="local-6989586621679039608"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-type">readTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039608"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039608"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039607"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039608"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039607"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-169"></span><span id="readTVar"><span class="annot"><span class="annottext">readTVar :: StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var hs-var">readTVar</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679039392"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039392"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TVar m a -&gt; STM m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039392"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span id="local-6989586621679039390"><span id="local-6989586621679039391"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier hs-type">readTVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039390"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039390"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-172"></span><span id="readTVarIO"><span class="annot"><span class="annottext">readTVarIO :: StrictTVar m a -&gt; m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVarIO"><span class="hs-identifier hs-var hs-var">readTVarIO</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679039389"><span class="annot"><span class="annottext">LazyTVar m a
tvar :: LazyTVar m a
$sel:tvar:StrictTVar :: forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="#local-6989586621679039389"><span class="hs-identifier hs-var hs-var">tvar</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTVar m a -&gt; m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TVar m a -&gt; m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.readTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTVar m a
</span><a href="#local-6989586621679039389"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span id="local-6989586621679039602"><span id="local-6989586621679039603"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-type">writeTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039603"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039603"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039602"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039602"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039603"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-175"></span><span id="writeTVar"><span class="annot"><span class="annottext">writeTVar :: StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var hs-var">writeTVar</span></a></span></span><span> </span><span id="local-6989586621679039388"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039388"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039387"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039387"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><span class="annottext">Maybe String -&gt; STM m () -&gt; STM m ()
forall a. HasCallStack =&gt; Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var">checkInvariant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; Maybe String
forall (m :: * -&gt; *) a. StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#getInvariant"><span class="hs-identifier hs-var">getInvariant</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039388"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039387"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; STM m ()) -&gt; STM m () -&gt; STM m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><span class="annottext">TVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TVar m a -&gt; a -&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.writeTVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar m a -&gt; TVar m a
forall (m :: * -&gt; *) a. StrictTVar m a -&gt; LazyTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3Atvar%3AStrictTVar"><span class="hs-identifier hs-var hs-var">tvar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039388"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039387"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span id="local-6989586621679039385"><span id="local-6989586621679039386"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier hs-type">modifyTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039386"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039386"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039385"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039385"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039385"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039386"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-180"></span><span id="modifyTVar"><span class="annot"><span class="annottext">modifyTVar :: StrictTVar m a -&gt; (a -&gt; a) -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#modifyTVar"><span class="hs-identifier hs-var hs-var">modifyTVar</span></a></span></span><span> </span><span id="local-6989586621679039384"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039384"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679039383"><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679039383"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">STM m a -&gt; (a -&gt; STM m ()) -&gt; STM m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; STM m ()) -&gt; (a -&gt; a) -&gt; a -&gt; STM m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621679039383"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span id="local-6989586621679039590"><span id="local-6989586621679039591"><span id="local-6989586621679039592"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-type">stateTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039592"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039592"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039591"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039591"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039590"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679039591"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039592"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039590"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-183"></span><span id="stateTVar"><span class="annot"><span class="annottext">stateTVar :: StrictTVar m s -&gt; (s -&gt; (a, s)) -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-var hs-var">stateTVar</span></a></span></span><span> </span><span id="local-6989586621679039382"><span class="annot"><span class="annottext">StrictTVar m s
</span><a href="#local-6989586621679039382"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679039381"><span class="annot"><span class="annottext">s -&gt; (a, s)
</span><a href="#local-6989586621679039381"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621679039380"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679039380"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictTVar m s -&gt; STM m s
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m s
</span><a href="#local-6989586621679039382"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679039379"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039379"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679039378"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679039378"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s -&gt; (a, s)
</span><a href="#local-6989586621679039381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679039380"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">StrictTVar m s -&gt; s -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m s
</span><a href="#local-6989586621679039382"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679039378"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; STM m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039379"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span id="local-6989586621679039376"><span id="local-6989586621679039377"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier hs-type">swapTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039377"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039377"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039376"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039376"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039377"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039376"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-190"></span><span id="swapTVar"><span class="annot"><span class="annottext">swapTVar :: StrictTVar m a -&gt; a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTVar"><span class="hs-identifier hs-var hs-var">swapTVar</span></a></span></span><span> </span><span id="local-6989586621679039375"><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039375"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679039374"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039374"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679039373"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039373"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039375"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><span class="annottext">StrictTVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><a href="#local-6989586621679039375"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039374"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; STM m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039373"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span id="local-6989586621679039370"><span id="local-6989586621679039371"><span id="local-6989586621679039372"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier hs-type">updateTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039371"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039371"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039370"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679039371"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039370"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-197"></span><span id="updateTVar"><span class="annot"><span class="annottext">updateTVar :: StrictTVar m s -&gt; (s -&gt; (a, s)) -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#updateTVar"><span class="hs-identifier hs-var hs-var">updateTVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar m s -&gt; (s -&gt; (a, s)) -&gt; STM m a
forall (m :: * -&gt; *) s a.
MonadSTM m =&gt;
StrictTVar m s -&gt; (s -&gt; (a, s)) -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#stateTVar"><span class="hs-identifier hs-var">stateTVar</span></a></span><span>
</span><span id="line-198"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">updateTVar</span><span> </span><span class="hs-pragma">&quot;Use stateTVar&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Strict TMVar
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">-- 'TMVar' that keeps its value in WHNF at all times</span><span>
</span><span id="line-205"></span><span class="hs-comment">--</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- Does not support an invariant: if the invariant would not be satisfied,</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- we would not be able to put a value into an empty TMVar, which would lead</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- to very hard to debug bugs where code is blocked indefinitely.</span><span>
</span><span id="line-209"></span><span class="hs-keyword">newtype</span><span> </span><span id="StrictTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span></span><span> </span><span id="local-6989586621679039583"><span class="annot"><a href="#local-6989586621679039583"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679039582"><span class="annot"><a href="#local-6989586621679039582"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StrictTMVar"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtoLazyTMVar%3AStrictTMVar"><span class="annot"><span class="annottext">StrictTMVar m a -&gt; LazyTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#%24sel%3AtoLazyTMVar%3AStrictTMVar"><span class="hs-identifier hs-var hs-var">toLazyTMVar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039583"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039582"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="local-6989586621679039367"><span id="local-6989586621679039368"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTMVar"><span class="hs-identifier hs-type">fromLazyTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039368"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039367"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039368"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039367"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-212"></span><span id="fromLazyTMVar"><span class="annot"><span class="annottext">fromLazyTMVar :: LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#fromLazyTMVar"><span class="hs-identifier hs-var hs-var">fromLazyTMVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621679039574"><span id="local-6989586621679039575"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-type">labelTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039575"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039575"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039574"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039575"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-215"></span><span id="labelTMVar"><span class="annot"><span class="annottext">labelTMVar :: StrictTMVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-var hs-var">labelTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039366"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039366"><span class="hs-identifier hs-var">tvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
TMVar m a -&gt; String -&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.labelTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039366"><span class="hs-identifier hs-var">tvar</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span id="local-6989586621679039364"><span id="local-6989586621679039365"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier hs-type">labelTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadLabelledSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039365"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039365"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039364"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039365"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-218"></span><span id="labelTMVarIO"><span class="annot"><span class="annottext">labelTMVarIO :: StrictTMVar m a -&gt; String -&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVarIO"><span class="hs-identifier hs-var hs-var">labelTMVarIO</span></a></span></span><span> </span><span id="local-6989586621679039363"><span class="annot"><span class="annottext">StrictTMVar m a
</span><a href="#local-6989586621679039363"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM m () -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM m () -&gt; m ()) -&gt; (String -&gt; STM m ()) -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTMVar m a -&gt; String -&gt; STM m ()
forall (m :: * -&gt; *) a.
MonadLabelledSTM m =&gt;
StrictTMVar m a -&gt; String -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#labelTMVar"><span class="hs-identifier hs-var">labelTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTMVar m a
</span><a href="#local-6989586621679039363"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span id="local-6989586621679039360"><span id="local-6989586621679039361"><span id="local-6989586621679039362"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVar"><span class="hs-identifier hs-type">traceTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadTraceSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039362"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-221"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039361"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039362"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-222"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039360"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span>
</span><span id="line-223"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039360"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039360"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">InspectMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">TraceValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-225"></span><span id="traceTMVar"><span class="annot"><span class="annottext">traceTMVar :: proxy m
-&gt; StrictTMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVar"><span class="hs-identifier hs-var hs-var">traceTMVar</span></a></span></span><span> </span><span id="local-6989586621679039359"><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039359"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039358"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039358"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">proxy m
-&gt; LazyTMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
forall (m :: * -&gt; *) (proxy :: (* -&gt; *) -&gt; *) a.
MonadTraceSTM m =&gt;
proxy m
-&gt; TMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.traceTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039359"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039358"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span id="local-6989586621679039355"><span id="local-6989586621679039356"><span id="local-6989586621679039357"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVarIO"><span class="hs-identifier hs-type">traceTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadTraceSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039357"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-228"></span><span>             </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039356"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039357"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-229"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039357"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039355"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-230"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039355"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039355"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">InspectMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039357"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">TraceValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039357"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-232"></span><span id="traceTMVarIO"><span class="annot"><span class="annottext">traceTMVarIO :: proxy m
-&gt; StrictTMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#traceTMVarIO"><span class="hs-identifier hs-var hs-var">traceTMVarIO</span></a></span></span><span> </span><span id="local-6989586621679039354"><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039354"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039353"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039353"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">proxy m
-&gt; LazyTMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; m ()
forall (m :: * -&gt; *) (proxy :: (* -&gt; *) -&gt; *) a.
MonadTraceSTM m =&gt;
proxy m
-&gt; TMVar m a
-&gt; (Maybe (Maybe a) -&gt; Maybe a -&gt; InspectMonad m TraceValue)
-&gt; m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.traceTMVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">proxy m
</span><a href="#local-6989586621679039354"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039353"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span id="local-6989586621679039350"><span id="local-6989586621679039351"><span id="local-6989586621679039352"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier hs-type">castStrictTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039352"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#LazyTMVar"><span class="hs-identifier hs-type">LazyTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039351"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-235"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039352"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039350"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039351"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039350"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-236"></span><span id="castStrictTMVar"><span class="annot"><span class="annottext">castStrictTMVar :: StrictTMVar m a -&gt; StrictTMVar n a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#castStrictTMVar"><span class="hs-identifier hs-var hs-var">castStrictTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039349"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039349"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar n a -&gt; StrictTMVar n a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
LazyTMVar n a
</span><a href="#local-6989586621679039349"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span id="local-6989586621679039347"><span id="local-6989586621679039348"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier hs-type">newTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039348"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039347"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039348"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039348"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039347"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-239"></span><span id="newTMVar"><span class="annot"><span class="annottext">newTMVar :: a -&gt; STM m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVar"><span class="hs-identifier hs-var hs-var">newTMVar</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039346"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039346"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyTMVar m a -&gt; StrictTMVar m a)
-&gt; STM m (LazyTMVar m a) -&gt; STM m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; STM m (LazyTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; STM m (TMVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039346"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span id="local-6989586621679039551"><span id="local-6989586621679039552"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-type">newTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039551"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039552"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039551"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-242"></span><span id="newTMVarIO"><span class="annot"><span class="annottext">newTMVarIO :: a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-var hs-var">newTMVarIO</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039345"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039345"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyTMVar m a -&gt; StrictTMVar m a)
-&gt; m (LazyTMVar m a) -&gt; m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; m (LazyTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (TMVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newTMVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039345"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span id="local-6989586621679039343"><span id="local-6989586621679039344"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier hs-type">newTMVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039344"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039343"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039344"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039344"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039343"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-245"></span><span id="newTMVarM"><span class="annot"><span class="annottext">newTMVarM :: a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarM"><span class="hs-identifier hs-var hs-var">newTMVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m (StrictTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newTMVarIO"><span class="hs-identifier hs-var">newTMVarIO</span></a></span><span>
</span><span id="line-246"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newTMVarM</span><span> </span><span class="hs-pragma">&quot;Use newTVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span id="local-6989586621679039341"><span id="local-6989586621679039342"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier hs-type">newEmptyTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039342"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039342"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039342"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039341"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-249"></span><span id="newEmptyTMVar"><span class="annot"><span class="annottext">newEmptyTMVar :: STM m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVar"><span class="hs-identifier hs-var hs-var">newEmptyTMVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyTMVar m a -&gt; StrictTMVar m a)
-&gt; STM m (LazyTMVar m a) -&gt; STM m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">STM m (LazyTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; STM m (TMVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newEmptyTMVar</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span id="local-6989586621679039541"><span id="local-6989586621679039542"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-type">newEmptyTMVarIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039542"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039542"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039542"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039541"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-252"></span><span id="newEmptyTMVarIO"><span class="annot"><span class="annottext">newEmptyTMVarIO :: m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-var hs-var">newEmptyTMVarIO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; StrictTMVar m a
forall (m :: * -&gt; *) a. LazyTMVar m a -&gt; StrictTMVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-var">StrictTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LazyTMVar m a -&gt; StrictTMVar m a)
-&gt; m (LazyTMVar m a) -&gt; m (StrictTMVar m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m (LazyTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; m (TMVar m a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.newEmptyTMVarIO</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span id="local-6989586621679039339"><span id="local-6989586621679039340"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier hs-type">newEmptyTMVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039340"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039340"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039340"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039339"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-255"></span><span id="newEmptyTMVarM"><span class="annot"><span class="annottext">newEmptyTMVarM :: m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarM"><span class="hs-identifier hs-var hs-var">newEmptyTMVarM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (StrictTMVar m a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; m (StrictTMVar m a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#newEmptyTMVarIO"><span class="hs-identifier hs-var">newEmptyTMVarIO</span></a></span><span>
</span><span id="line-256"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">newEmptyTMVarM</span><span> </span><span class="hs-pragma">&quot;Use newEmptyTMVarIO&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span id="local-6989586621679039337"><span id="local-6989586621679039338"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier hs-type">takeTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039337"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039337"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-259"></span><span id="takeTMVar"><span class="annot"><span class="annottext">takeTMVar :: StrictTMVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#takeTMVar"><span class="hs-identifier hs-var hs-var">takeTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039336"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039336"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; STM m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.takeTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039336"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span id="local-6989586621679039334"><span id="local-6989586621679039335"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier hs-type">tryTakeTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039335"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039335"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039334"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039335"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039334"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-262"></span><span id="tryTakeTMVar"><span class="annot"><span class="annottext">tryTakeTMVar :: StrictTMVar m a -&gt; STM m (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryTakeTMVar"><span class="hs-identifier hs-var hs-var">tryTakeTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039333"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039333"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m (Maybe a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; STM m (Maybe a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.tryTakeTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039333"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621679039331"><span id="local-6989586621679039332"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier hs-type">putTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039332"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039332"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039332"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-265"></span><span id="putTMVar"><span class="annot"><span class="annottext">putTMVar :: StrictTMVar m a -&gt; a -&gt; STM m ()
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#putTMVar"><span class="hs-identifier hs-var hs-var">putTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039330"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039330"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039329"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039329"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m ()
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; a -&gt; STM m ()
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.putTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039330"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039329"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621679039327"><span id="local-6989586621679039328"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier hs-type">tryPutTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039327"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039327"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span></span><span>
</span><span id="line-268"></span><span id="tryPutTMVar"><span class="annot"><span class="annottext">tryPutTMVar :: StrictTMVar m a -&gt; a -&gt; STM m Bool
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryPutTMVar"><span class="hs-identifier hs-var hs-var">tryPutTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039326"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039326"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039325"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039325"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m Bool
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; a -&gt; STM m Bool
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.tryPutTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039326"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039325"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span id="local-6989586621679039323"><span id="local-6989586621679039324"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier hs-type">readTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039323"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039323"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-271"></span><span id="readTMVar"><span class="annot"><span class="annottext">readTMVar :: StrictTMVar m a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#readTMVar"><span class="hs-identifier hs-var hs-var">readTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039322"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039322"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; STM m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.readTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039322"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span id="local-6989586621679039320"><span id="local-6989586621679039321"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier hs-type">tryReadTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039321"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039321"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039320"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039321"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039320"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-274"></span><span id="tryReadTMVar"><span class="annot"><span class="annottext">tryReadTMVar :: StrictTMVar m a -&gt; STM m (Maybe a)
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#tryReadTMVar"><span class="hs-identifier hs-var hs-var">tryReadTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039319"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039319"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m (Maybe a)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; STM m (Maybe a)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.tryReadTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039319"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span id="local-6989586621679039317"><span id="local-6989586621679039318"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier hs-type">swapTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039318"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039318"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039318"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039317"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-277"></span><span id="swapTMVar"><span class="annot"><span class="annottext">swapTMVar :: StrictTMVar m a -&gt; a -&gt; STM m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#swapTMVar"><span class="hs-identifier hs-var hs-var">swapTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039316"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039316"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679039315"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039315"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; a -&gt; STM m a
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; a -&gt; STM m a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.swapTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039316"><span class="hs-identifier hs-var">tmvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039315"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span id="local-6989586621679039313"><span id="local-6989586621679039314"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier hs-type">isEmptyTMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039314"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039314"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039313"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039314"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span></span></span><span>
</span><span id="line-280"></span><span id="isEmptyTMVar"><span class="annot"><span class="annottext">isEmptyTMVar :: StrictTMVar m a -&gt; STM m Bool
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#isEmptyTMVar"><span class="hs-identifier hs-var hs-var">isEmptyTMVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTMVar"><span class="hs-identifier hs-type">StrictTMVar</span></a></span><span> </span><span id="local-6989586621679039312"><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039312"><span class="hs-identifier hs-var">tmvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a -&gt; STM m Bool
forall (m :: * -&gt; *) a. MonadSTM m =&gt; TMVar m a -&gt; STM m Bool
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-var">Lazy.isEmptyTMVar</span></a></span><span> </span><span class="annot"><span class="annottext">LazyTMVar m a
</span><a href="#local-6989586621679039312"><span class="hs-identifier hs-var">tmvar</span></a></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Dealing with invariants
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span id="local-6989586621679039650"><span id="local-6989586621679039651"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#getInvariant"><span class="hs-identifier hs-type">getInvariant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039651"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039650"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039650"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span></span></span><span>
</span><span id="line-287"></span><span id="local-6989586621679039652"><span id="local-6989586621679039653"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#mkStrictTVar"><span class="hs-identifier hs-type">mkStrictTVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679039653"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/src"><span class="hs-identifier hs-type">Lazy.TVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039652"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039653"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039652"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679039653"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- | Check invariant (if enabled) before continuing</span><span>
</span><span id="line-290"></span><span class="hs-comment">--</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- @checkInvariant mErr x@ is equal to @x@ if @mErr == Nothing@, and throws</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- an error @err@ if @mErr == Just err@.</span><span>
</span><span id="line-293"></span><span class="hs-comment">--</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- This is exported so that other code that wants to conditionally check</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- invariants can reuse the same logic, rather than having to introduce new</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- per-package flags.</span><span>
</span><span id="line-297"></span><span id="local-6989586621679039626"><span class="annot"><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-type">checkInvariant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039626"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679039626"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-cpp">

#if CHECK_TVAR_INVARIANT
</span><span class="hs-identifier">getInvariant</span><span> </span><span class="hs-identifier">StrictTVar</span><span> </span><span class="hs-special">{</span><span class="hs-identifier">invariant</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">invariant</span><span>
</span><span id="line-301"></span><span class="hs-identifier">mkStrictTVar</span><span> </span><span class="hs-identifier">invariant</span><span>  </span><span class="hs-identifier">tvar</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">StrictTVar</span><span> </span><span class="hs-special">{</span><span class="hs-identifier">invariant</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tvar</span><span class="hs-special">}</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-identifier">checkInvariant</span><span> </span><span class="hs-identifier">Nothing</span><span>    </span><span class="hs-identifier">k</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">k</span><span>
</span><span id="line-304"></span><span class="hs-identifier">checkInvariant</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">err</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">error</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-string">&quot;Invariant violation: &quot;</span><span> </span><span class="hs-operator">++</span><span> </span><span class="hs-identifier">err</span><span class="hs-cpp">
#else
</span><span id="getInvariant"><span class="annot"><span class="annottext">getInvariant :: StrictTVar m a -&gt; a -&gt; Maybe String
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#getInvariant"><span class="hs-identifier hs-var hs-var">getInvariant</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictTVar m a
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-307"></span><span id="mkStrictTVar"><span class="annot"><span class="annottext">mkStrictTVar :: (a -&gt; Maybe String) -&gt; TVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#mkStrictTVar"><span class="hs-identifier hs-var hs-var">mkStrictTVar</span></a></span></span><span> </span><span id="local-6989586621679039311"><span class="annot"><span class="annottext">a -&gt; Maybe String
</span><a href="#local-6989586621679039311"><span class="hs-identifier hs-var">_invariant</span></a></span></span><span> </span><span id="local-6989586621679039310"><span class="annot"><span class="annottext">TVar m a
</span><a href="#local-6989586621679039310"><span class="hs-identifier hs-var">tvar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar :: forall (m :: * -&gt; *) a. LazyTVar m a -&gt; StrictTVar m a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">TVar m a
tvar :: TVar m a
$sel:tvar:StrictTVar :: TVar m a
</span><a href="#local-6989586621679039310"><span class="hs-identifier hs-var hs-var">tvar</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span id="checkInvariant"><span class="annot"><span class="annottext">checkInvariant :: Maybe String -&gt; a -&gt; a
</span><a href="Control.Monad.Class.MonadSTM.Strict.html#checkInvariant"><span class="hs-identifier hs-var hs-var">checkInvariant</span></a></span></span><span> </span><span id="local-6989586621679039309"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679039309"><span class="hs-identifier hs-var">_err</span></a></span></span><span>       </span><span id="local-6989586621679039308"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039308"><span class="hs-identifier hs-var">k</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679039308"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-cpp">
#endif
</span></pre></body></html>